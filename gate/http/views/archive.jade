extends layout

block styles
	link(rel="stylesheet", href="/archive.css")
	style.
		.scrollback-embed{
			display: none !important;
		}

block content
	.container
		.box.span8.container
			h1.box.span12 #{query.title} archives (#{relDate(data[0].time)} ago)
			div.timeRange.box.span12
				span Showing #{relDate(data[0].time, data[data.length-1].time)} of conversation 
				if(scrollPrev)
					div(style="float: left")
						a.navLink(href="/#{query.to}/until/#{scrollPrev}") Prev
				if(scrollNext)
					div(style="float: right")
						a.navLink(href="/#{query.to}/since/#{scrollNext}") Next

			.messageList.box.span12
				- prevtime = 0
				each message in data
					if message && message.type && message.type=="text"
						.item.container
							div.box.span3 [#{message.from}]
							div.box.span5.message #{message.text}
							if(prevtime)
								div.box.span4.time #{relDate(prevtime, message.time)} later
							else
								div.box.span4.time #{relDate(message.time)} ago
						- prevtime = message.time
							
	
			if(scrollPrev)
				div(style="float: left")
					a.navLink(href="/#{query.to}/until/#{scrollPrev}") Prev
				
			if(scrollNext)
				div(style="float: right")
					a.navLink(href="/#{query.to}/since/#{scrollNext}") Next
			
			
			.embed.box.span12.paddingBottom100px
				p.embed Embed #{query.to} on your web page.
				pre.
						window.scrollback = {
							streams:["#{query.to}"],
							theme: 'light',
							ticker: true,
						};

						/***** don't edit below *****/
						(function(d,s,h,e){e=d.createElement(s);e.async=1;
						e.src=h+'/client.min.js';scrollback.host=h;
						d.getElementsByTagName(s)[0].parentNode.appendChild(e);}
						(document,'script','http://'+location.host));

	script.
		window.scrollback = {
			streams:["#{query.to}"],
			theme: 'light',
			ticker: true,
			maxHeight: 9999,
			minimized: false
		};
		
		/***** don't edit below *****/
		(function(d,s,h,e){e=d.createElement(s);e.async=1;
		e.src=h+'/client.min.js';scrollback.host=h;
		d.getElementsByTagName(s)[0].parentNode.appendChild(e);}
		(document,'script','http://'+location.host));