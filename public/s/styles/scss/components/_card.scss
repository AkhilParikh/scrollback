@include exports("card") {
    $card-height: 12.5em;

    %ellipsize {
        overflow-x: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .card {
        &-header {
            @include flexbox;
            @include flex-direction(row);
            @include flex-wrap(nowrap);
            @include align-items(center);
            @include align-content(center);

            height: $bar-height;
            border-bottom: 1px solid rgba(0,0,0,0.1);

            &-title {
                @extend %ellipsize;
                @include flex-grow(1);

                font-size: 1em;
                font-weight: 700;
                padding: 0 1em;
                margin: 0;

                @for $i from 1 through length($palette) {
                    [data-color="#{$i - 1}"] & { color: nth($palette, $i); }
                }
            }

            &-icon {
                $icon-width: $bar-height / 1.5;

                @include flex-shrink(0);

                font-size: 1.5em;
                padding: (1em / 1.5);
                color: inherit;
                height: 100%;
                width: $icon-width;
                line-height: 1;

                &:hover, &:focus {
                    background-color: rgba(0,0,0,0.05);
                    color: inherit;
                }

                &:active {
                    background-color: rgba(0,0,0,0.1);
                    color: inherit;
                }

                &-more { @include icon(more); }
            }

            &-badge {
                @extend %appear;
                @include flex-shrink(0);

                margin: 0 (.5em / .8);

                &[data-empty] { display: none; };
            }
        }

        &-content {
            margin: 1em;
            height: $card-height - 6em;
            overflow: hidden;
        }

        &-chat {
            @extend %ellipsize;

            line-height: 2;

            &-nick {
                font-weight: 700;
                opacity: 0.8;

                &:after {
                    content: ":";
                    font-weight: 400;
                    margin: 0 .25em;
                }
            }

            &-message { opacity: 0.6; }
        }

        &-button {
            @extend %ellipsize;
            @extend %clearfix;
            @include icon(reply);

            display: block;
            height: $bar-height / .8;
            font-weight: 700;
            text-transform: uppercase;
            font-size: .8em;
            padding: (1em / .8);
            padding-left: 0;
            cursor: pointer;
            opacity: .7;

            &:hover, &:focus {
                background-color: rgba(0,0,0,0.05);
                color: inherit;
            }

            &:active {
                background-color: rgba(0,0,0,0.1);
                color: inherit;
            }

            &:before {
                float: left;
                font-size: 1.5em;
                padding: 0 (1em / 1.5);
                opacity: .7;
            }
        }

        &-entry {
            display: block;
            height: $bar-height;
            padding: 1em;
            margin: 0;
            border: none;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            width: 100%;

            .card-quick-reply.active & { box-shadow: inset 0 0 0 1px $accent-color; }
        }

        &-quick-reply {
            height: $bar-height;
            box-shadow: inset 0 1px 0 0 rgba(0,0,0,0.1);
            overflow: hidden;

            &-content {
                @extend %transition;

                .card-quick-reply.active & { @include transform(translate3d(0, ($bar-height * -1), 0)); }
            }
        }
    }
}
